<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mystarsnight Shop</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,sans-serif;
  background:radial-gradient(circle at top,#1b1f3a,#0b0d13);
  color:#eef;
}

header{
  padding:80px 20px 60px;
  text-align:center;
  position:relative;
}

header h1{
  margin:0;
  font-size:3.2em;
  background:linear-gradient(135deg,#9f8cff,#6b5cff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

header p{opacity:.9;font-size:1.15em}

#announcement{
  display:none;
  padding:16px;
  text-align:center;
  background:#242863;
  font-weight:600;
}

main{
  max-width:1200px;
  margin:auto;
  padding:40px 20px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:28px;
}

.card{
  background:rgba(255,255,255,0.06);
  backdrop-filter:blur(14px);
  border-radius:22px;
  padding:18px;
  box-shadow:0 25px 60px rgba(0,0,0,.55);
  transition:transform .2s;
}

.card:hover{transform:translateY(-6px)}

.card img{
  width:100%;
  border-radius:16px;
  margin-bottom:14px;
}

.card h3{margin:6px 0}
.card p{opacity:.85}

button{
  background:linear-gradient(135deg,#6b5cff,#9f8cff);
  border:none;
  border-radius:14px;
  padding:12px 18px;
  color:white;
  cursor:pointer;
}

button.secondary{
  background:#2a2f55;
}

.admin-login{
  text-align:center;
  margin-top:80px;
}

#adminReveal{
  background:transparent;
  color:rgba(255,255,255,0.35);
  font-size:28px;
  border:none;
  cursor:pointer;
  letter-spacing:6px;
}

#adminReveal:hover{
  color:rgba(255,255,255,0.7);
}

#adminLoginBox{
  display:none;
  margin-top:14px;
}

#adminPanel{
  display:none;
  margin-top:80px;
  padding:35px;
  background:rgba(255,255,255,0.05);
  border-radius:26px;
}

.admin-card{
  background:#1b1f3a;
  border-radius:18px;
  padding:18px;
  margin-bottom:20px;
}

input,textarea{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:none;
  background:#12142a;
  color:white;
}

label{font-size:.85em;opacity:.8}

footer{
  text-align:center;
  padding:40px;
  opacity:.6;
}
</style>
</head>

<body>

<header>
  <h1 id="shopName">Mystarsnight Shop</h1>
  <p id="shopTagline">Built by a human. Not a corporation. âœ¨</p>
</header>

<div id="announcement"></div>

<main>

  <div class="grid" id="products"></div>

  <!-- Hidden Admin Access -->
  <div class="admin-login">
    <button id="adminReveal" onclick="toggleAdminLogin()">â€¢ â€¢ â€¢</button>

    <div id="adminLoginBox">
      <input id="adminKey" type="password" placeholder="Admin code">
      <br><br>
      <button onclick="login()">Enter Admin</button>
    </div>
  </div>

  <!-- Admin Panel -->
  <div id="adminPanel">
    <h2>Admin Dashboard</h2>
    <p style="opacity:.8">Live editor â€” changes apply instantly.</p>

    <div class="admin-card">
      <h3>Brand Settings</h3>
      <input placeholder="Shop name" oninput="settings.name=this.value;save()">
      <input placeholder="Tagline" oninput="settings.tagline=this.value;save()">
    </div>

    <div class="admin-card">
      <h3>Global Announcement</h3>
      <input id="annText" placeholder="Announcement message">
      <br><br>
      <button onclick="announce(10)">Show 10s</button>
      <button class="secondary" onclick="announce(300)">Show 300s</button>
    </div>

    <div class="admin-card">
      <h3>Add Product</h3>
      <input id="pName" placeholder="Name">
      <textarea id="pDesc" placeholder="Description"></textarea>
      <input id="pImg" placeholder="Image URL">
      <input id="pFile" placeholder="Download URL">
      <input id="pStripe" placeholder="Stripe link">
      <label><input type="checkbox" id="pFree"> Free</label>
      <br><br>
      <button onclick="addProduct()">Add Product</button>
    </div>

    <div class="admin-card">
      <h3>Purchase History</h3>
      <div id="history"></div>
    </div>
  </div>

</main>

<footer>
  Mystarsnight â€” digital goods done right ðŸŒ™
</footer>

<script>
const ADMIN="2238";
let isAdmin=false;

let settings=JSON.parse(localStorage.getItem("settings"))||{
  name:"Mystarsnight Shop",
  tagline:"Built by a human. Not a corporation."
};

let products=JSON.parse(localStorage.getItem("products"))||[];
let purchases=JSON.parse(localStorage.getItem("purchases"))||[];

function toggleAdminLogin(){
  const box=document.getElementById("adminLoginBox");
  box.style.display = box.style.display==="none" ? "block" : "none";
}

function save(){
  localStorage.setItem("settings",JSON.stringify(settings));
  localStorage.setItem("products",JSON.stringify(products));
  localStorage.setItem("purchases",JSON.stringify(purchases));
  render();
}

function render(){
  shopName.textContent=settings.name;
  shopTagline.textContent=settings.tagline;

  productsEl.innerHTML="";
  products.forEach((p,i)=>{
    productsEl.innerHTML+=`
      <div class="card">
        <img src="${p.image}">
        <h3 contenteditable="${isAdmin}" onblur="edit(${i},'name',this.innerText)">${p.name}</h3>
        <p contenteditable="${isAdmin}" onblur="edit(${i},'desc',this.innerText)">${p.desc}</p>

        ${
          p.free
          ? `<a href="${p.file}" download><button>Download</button></a>`
          : p.stripe
            ? `<a href="${p.stripe}" target="_blank"><button>Buy with Stripe</button></a>`
            : `<button disabled>Unavailable</button>`
        }

        ${isAdmin?`
          <br><br>
          <button class="secondary" onclick="move(${i},-1)">â†‘</button>
          <button class="secondary" onclick="move(${i},1)">â†“</button>
          <button class="secondary" onclick="toggleFree(${i})">${p.free?"Paid":"Free"}</button>
          <button class="secondary" onclick="remove(${i})">Delete</button>
        `:""}
      </div>
    `;
  });

  history.innerHTML=purchases.map(p=>`<p>ðŸ§¾ ${p.name} â€” ${p.date}</p>`).join("");
}

function login(){
  if(adminKey.value===ADMIN){
    isAdmin=true;
    adminPanel.style.display="block";
    save();
  }
}

function addProduct(){
  products.push({
    name:pName.value||"Untitled",
    desc:pDesc.value||"",
    image:pImg.value||"https://via.placeholder.com/400x250",
    file:pFile.value||"#",
    stripe:pStripe.value||"",
    free:pFree.checked
  });
  pName.value=pDesc.value=pImg.value=pFile.value=pStripe.value="";
  pFree.checked=false;
  save();
}

function edit(i,key,val){
  products[i][key]=val;
  save();
}

function remove(i){
  products.splice(i,1);
  save();
}

function move(i,dir){
  const t=products[i];
  products.splice(i,1);
  products.splice(i+dir,0,t);
  save();
}

function toggleFree(i){
  products[i].free=!products[i].free;
  save();
}

function announce(sec){
  announcement.textContent=annText.value;
  announcement.style.display="block";
  setTimeout(()=>announcement.style.display="none",sec*1000);
}

const productsEl=document.getElementById("products");
render();
</script>

</body>
</html>
